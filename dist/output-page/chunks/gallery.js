(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{134:function(e,t,s){"use strict";s(132);t.a={methods:{timeStringToSeconds:function(e){var t=e.match(/[0-9]+m|[0-9]+ min/),s=e.match(/\d+/g),r={},i=function(e){return 60*+e*60},a=function(e){return 60*+e};return 2===s.length?(r.h=s[0],r.m=s[1],r.numbers=i(r.h)+a(r.m)):t?(r.m=s[0],r.numbers=a(r.m)):(r.h=s[0],r.numbers=i(r.h)),r.numbers}}}},139:function(e,t,s){"use strict";s(158),s(172),s(73),s(131);t.a={methods:{secondsToTimeString:function(e,t){var s=function(e,s){return t?e:("000"+e).slice(-1*s)},r=parseFloat(e).toFixed(3),i=Math.floor(r/60/60),a=Math.floor(r/60)%60,o=(Math.floor(r-60*a),r.slice(-3),(i.toString().length>1?i:s(i,2))+(t?"h ":".")),n=s(a,2)+(t?"m ":"");return t&&!i&&(o=""),o+n}}}},262:function(e,t,s){"use strict";s(73),s(249),s(131),s(95),s(162);t.a={methods:{slugify:function(e){var t="àáâäæãåāăąçćčđďèéêëēėęěğǵḧîïíīįìłḿñńǹňôöòóœøōõőṕŕřßśšşșťțûüùúūǘůűųẃẍÿýžźż·/_,:;",s=new RegExp(t.split("").join("|"),"g");return e.toString().toLowerCase().replace(/\s+/g,"-").replace(s,(function(e){return"aaaaaaaaaacccddeeeeeeeegghiiiiiilmnnnnoooooooooprrsssssttuuuuuuuuuwxyyzzz------".charAt(t.indexOf(e))})).replace(/&/g,"-and-").replace(/[^\w\-]+/g,"").replace(/\-\-+/g,"-").replace(/^-+/,"").replace(/-+$/,"")}}}},279:function(e,t,s){"use strict";s(73),s(131);t.a={methods:{makeFullUrl:function(e){var t=new Url(this.general.urlOrigin+e);return t.query.ipRedirectOverride=!0,t.query.overrideBaseCountry=!0,t.toString()}}}},280:function(e,t,s){},281:function(e,t,s){},282:function(e,t,s){},283:function(e,t,s){},284:function(e,t,s){},285:function(e,t,s){"use strict";s(97);var r=s(262);t.a={mixins:[r.a],methods:{buildCategories:function(e){var t=this,s={parent:[]};return _.each(t.library.books,(function(e,r){if(e.categories){var i=e.categories[0].name,a=_.find(s.parent,["name",i]);if(a||(a=s.parent.push({name:i,slug:t.slugify(i),books:[]})),(a=_.find(s.parent,["name",i])).books.push(e),e.categories[1]){a.sub||(a.sub=[]);var o=e.categories[1].name,n=_.find(a.sub,["name",o]);n||(n=a.sub.push({name:o,slug:t.slugify(o),books:[]})),(n=_.find(a.sub,["name",o])).books.push(e)}}})),s.parent=_.orderBy(s.parent,"name","asc"),_.each(s.parent,(function(e,t){e.sub=_.orderBy(e.sub,"name","asc")})),s}}}},286:function(e,t,s){},440:function(e,t,s){"use strict";var r=s(280);s.n(r).a},441:function(e,t,s){"use strict";var r=s(281);s.n(r).a},442:function(e,t,s){"use strict";var r=s(282);s.n(r).a},443:function(e,t,s){"use strict";var r=s(283);s.n(r).a},444:function(e,t,s){"use strict";var r=s(284);s.n(r).a},445:function(e,t,s){"use strict";var r=s(286);s.n(r).a},478:function(e,t,s){"use strict";s.r(t);s(96),s(97),s(278),s(163),s(241),s(132),s(162),s(73),s(131),s(95),s(164);var r={methods:{sortBookNumbers:function(e){return _.orderBy(e.books,(function(t){if(_.find(t.series,"bookNumbers")){var s=_.find(t.series,["name",e.seriesName?e.seriesName:t.series[0].name]).bookNumbers,r=_.isArray(s)?s[0]:s,i="string"==typeof r?r.split("-"):[r];return i.length>1?parseFloat(i[0]):r}return e.missingNumber||9999999}),e.direction)}}},i=s(134),a=s(139),o={mixins:[i.a],methods:{progressbarWidth:function(e){if(e.progress){if("finished"===e.progress.toLowerCase().trim())return{width:"100%"};if(e.length){var t=this.timeStringToSeconds(e.progress),s=this.timeStringToSeconds(e.length);return{width:(t=s-t)/s*100+"%"}}return{width:0}}return{width:0}}}},n=s(135),l=(s(438),s(439),{name:"aleCarousel",props:["gallery","general","books","type"],mixins:[s(279).a,n.a],computed:{heading:function(){switch(this.type){case"peopleAlsoBought":return"People who bought this also bought:";case"moreLikeThis":return"More listens like this:"}}},methods:{sliderTippyContent:function(e){return'<div style="font-weight: normal; text-align: left; padding: 10px; font-size: 1em; line-height: 1.4em">'+(e.title?'<div><h3 style="font-size: 1.3em; font-weight: bold; margin: 0 0 3px 0;">'+e.title+"</h3>":"")+(e.subHeading?'<div><h2 style="font-size: 1.1em; font-weight: normal; margin: 0 0 3px 0;">'+e.subHeading+"</h2>":"")+(e.authors?"<div><strong>Authors: </strong>"+e.authors+"</div>":"")+(e.narrators?"<div><strong>Authors: </strong>"+e.narrators+"</div>":"")+(e.length?"<div><strong>Length: </strong>"+e.length+"</div>":"")+"</div>"},makeSlider:function(e){var t=this;this.$nextTick((function(){t.destroySlider(),t.gallery.details.sliders[e]=$(".ale-carousel."+e+" .ale-slider").not(".slick-initialized").slick({infinite:!1,draggable:!0,dots:!0,arrows:!1,slidesToShow:5,slidesToScroll:5,lazyLoad:"ondemand",responsive:[{breakpoint:820,settings:{slidesToShow:4,slidesToScroll:4}},{breakpoint:620,settings:{slidesToShow:3,slidesToScroll:3}}]})}))},destroySlider:function(){this.gallery.details.sliders[this.type]&&(this.gallery.details.sliders[this.type].slick("unslick"),this.gallery.details.sliders[this.type]=null)},onDetailsToggle(e){e.detailsChanged&&this.makeSlider(this.type)}},created:function(){Eventbus.$on("detailsToggle",this.onDetailsToggle)},beforeDestroy:function(){this.destroySlider(),Eventbus.$off("detailsToggle",this.onDetailsToggle)}}),c=(s(440),s(8)),u={name:"aleBookdetails",components:{aleCarousel:Object(c.a)(l,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"ale-carousel",class:e.type},[s("h3",{staticClass:"ale-heading"},[e._v(e._s(e.heading))]),e._v(" "),s("div",{staticClass:"ale-slider"},e._l(e.books,(function(t,r){return s("div",{key:r,staticClass:"ale-carousel-item"},[s("a",{directives:[{name:"tippy",rawName:"v-tippy",value:{placement:"top",arrow:!0,maxWidth:500},expression:"{ placement: 'top',  arrow: true, maxWidth: 500 }"}],attrs:{href:e.makeFullUrl(t.url),target:"_blank",content:e.sliderTippyContent(t)}},[s("img",{staticClass:"cover",attrs:{width:"130",height:"130","data-lazy":e.makeCoverUrl(t.coverUrl),alt:""}})])])})),0)])}),[],!1,null,null,null).exports},mixins:[r,i.a,a.a,o,n.a],props:["booksArray","library","gallery","general"],data:function(){return{booksInSeriesContent:{toggle:!1},summary:{readmore:{exists:!1},maxHeight:null,maxHeightTemp:null}}},created:function(){Eventbus.$on("detailsToggle",this.onDetailsToggle),Eventbus.$on("afterWindowResize",this.onWindowResize)},beforeDestroy:function(){Eventbus.$off("detailsToggle",this.onDetailsToggle),Eventbus.$off("afterWindowResize",this.onWindowResize)},computed:{getSummary(){return this.book.summary||this.book.blurb},goodReadsSearchUrl:function(){return"https://www.goodreads.com/search?q="+(this.book.ISBN_10&&this.book.ISBN_10||this.book.ISBN_13&&this.book.ISBN_13||encodeURIComponent(this.book.authors[0].name+" "+this.book.titleShort))},bookUrl:function(){var e=new Url(this.general.urlOrigin+this.book.url);return e.query.ipRedirectOverride=!0,e.query.overrideBaseCountry=!0,e.toString()},booksInSeriesCount:function(){if(this.booksInSeries){var e=this.gallery.searchOptions.lists.numberSortSeriesName,t=null;if(e)t=this.booksInSeries[e].length;else{var s=[];_.each(this.booksInSeries,(function(e){s.push(e.length)})),t=s.join(","),s=null}return t?"("+t+")":""}return""},booksInSeries:function(){var e=this,t={};return e.book.series&&$.each(e.book.series,(function(s,r){var i=_.filter(e.library.books,{series:[{name:r.name}]});_.isEmpty(i)||(t[r.name]=e.sortBookNumbers({books:i,direction:"asc",seriesName:r.name}))})),!_.isEmpty(t)&&t},book:function(){return!!this.booksArray[this.gallery.details.index]&&this.booksArray[this.gallery.details.index]}},methods:{openAdjacentBookDetails:function(e){if(this.gallery.details.open)switch(e.srcKey){case"left":this.gallery.details.index>0&&Eventbus.$emit("galleryBookClick",{from:"book-details-arrow-left-click",index:this.gallery.details.index-1,animationSpeed:1700,dontClose:!0});break;case"right":var t=this.booksArray.length;this.gallery.details.index<t&&Eventbus.$emit("galleryBookClick",{from:"book-details-arrow-right-click",index:this.gallery.details.index+1,animationSpeed:0,dontClose:!0})}},closeBookDetails:function(){if(this.gallery.details.open){this.gallery.details.open=!1,this.gallery.details.index=-1;this.book.asin;this.$route.query.book&&this.$router.replace({query:{book:void 0}})}},progressToolTipBoundaryEl:function(){return $("#ale-bookdetails .information .cover-wrap")[0]},progressTooltip:function(e){if("finished"===e.progress.toLowerCase().trim()){var t=this.timeStringToSeconds(e.length);return"Finished: ( "+this.secondsToTimeString(t)+" )"}var s=this.timeStringToSeconds(e.progress),r=this.timeStringToSeconds(e.length),i=r-s;return"Progress: "+this.secondsToTimeString(i)+" / "+this.secondsToTimeString(r)},progressInfo:function(e){if(e.progress&&e.length){if("finished"===e.progress.toLowerCase().trim()){var t=this.timeStringToSeconds(e.length);return"<div>Finished ( "+this.secondsToTimeString(t,!0)+" )</div>"}var s=this.timeStringToSeconds(e.progress),r=this.timeStringToSeconds(e.length),i=r-s;return'<div class="text-align-left">Progress: </div><div class="text-align-right">'+this.secondsToTimeString(i,!0)+" / "+this.secondsToTimeString(r,!0)+"</div>"}return"<div>Length: "+e.length+"</div>"},onDetailsToggle:function(e){e.detailsChanged&&this.summaryMaxHeight()},onWindowResize:function(e){this.summaryMaxHeight()},summaryMaxHeight:function(){this.gallery.details.readmore.toggle=!1;var e=$("#ale-bookdetails > #book-info-container > .inner-wrap > .top"),t=e.find("> .information").outerHeight(),s=e.find("> .book-summary-wrapper > .book-summary").height()>t;this.summary.readmore.exists=!!s,this.summary.maxHeight=s?t+"px":"none",this.summary.maxHeightTemp=t+"px"},summaryReadMoreclick:function(){if(this.gallery.details.readmore.toggle=!this.gallery.details.readmore.toggle,!this.gallery.details.readmore.toggle)var e=$("#ale-bookdetails .book-summary-wrapper .summary-read-more"),t=$("html, body").scrollTop(),s=e.offset().top-t;(this.summary.maxHeight=this.gallery.details.readmore.toggle?"none":this.summary.maxHeightTemp,this.gallery.details.readmore.toggle)||(t=$("html, body").scrollTop())>$("#ale-bookdetails").offset().top+$("#ale-bookdetails .inner-wrap .information").innerHeight()&&this.$nextTick((function(){$("html, body").animate({scrollTop:e.offset().top-s},0)}))},booksInSeriesLabelClick:function(){var e=this;this.booksInSeriesContent.toggle=!this.booksInSeriesContent.toggle,this.$nextTick((function(){e.summaryMaxHeight()}))},searchLock:function(e){var t=this;this.gallery.searchLocked.active||(this.gallery.randomResults=null,this.gallery.searchLocked.tempValue=this.gallery.searchValue,this.gallery.searchLocked.active=!0,this.gallery.searchEnabled=!1,this.gallery.searchIcons.scope=!1,this.gallery.searchOptions.listsTemp=_.cloneDeep(this.gallery.searchOptions.lists)),this.gallery.searchLocked.inputValue=e.seriesName,this.gallery.searchOptions.lists.showSortValues=e.sortValues,this.gallery.searchOptions.lists.numberSortSeriesName=e.seriesName,this.gallery.searchLocked.reason=e.reason,_.map(this.gallery.searchOptions.lists.filter,(function(e,t){return _.extend(e,{active:!0})})),this.gallery.customResults=_.filter(this.library.books,e.filter);var s=_.findIndex(this.gallery.searchOptions.lists.sort,["key",e.sortKey]);this.gallery.searchOptions.lists.sort[s].active=!1,this.gallery.searchOptions.lists.sortIndex=s,this.$nextTick((function(){e.callback(t)}))},booksInSeriesItemClick:function(e,t){this.searchLock({reason:"Series",filter:{series:[{name:t}]},sortKey:"bookNumbers",sortValues:!0,sortDirection:"asc",seriesName:t,callback:function(t){t.gallery.details.open=!1,Eventbus.$emit("galleryBookClick",{from:"books-in-series-item-click",index:_.findIndex(t.booksArray,["asin",e.asin]),animationSpeed:0})}})},iconTippyContent:function(e){var t=this.numbersClass(e),s="";return t.finished?s="Finished!":t.unfinished?s="Haven't started yet...":t.reading&&(s="Still listening..."),s},booksInSeriesIcon:function(e){var t=this.numbersClass(e),s="";return t.finished?s="archive":t.unfinished?s="book":t.reading&&(s="book-reader"),s},numbersClass:function(e){var t=e.progress;return{finished:!(!t||!t.toLowerCase().match("finished")),reading:!(!t||t.toLowerCase().match("finished")),unfinished:!e.progress,current:this.book.asin===e.asin}},bookNumbers:function(e,t){if(_.find(e.series,"bookNumbers")){var s=_.filter(e.series,["name",t])[0].bookNumbers;return _.isArray(s)?s.join(", "):s}return""},linkifySeries:function(e,t){var s=this;if(e){var r="";return _.each(e,(function(i,a){var o=new Url(s.general.urlOrigin+i.url);o.query.ipRedirectOverride=!0,o.query.overrideBaseCountry=!0,r+='<a href="'+o.toString()+'" target="_blank">'+i.name+"</a>",i.bookNumber&&(r+='<span class="book-number"> (book '+i.bookNumber+")</span>"),a<e.length-1&&(r+=t||", ")})),r}},linkifyObjArray:function(e,t){var s=this;if(e){var r="";return _.each(e,(function(i,a){var o=new Url(s.general.urlOrigin+i.url);o.query.ipRedirectOverride=!0,o.query.overrideBaseCountry=!0,r+='<a href="'+o.toString()+'" target="_blank">'+i.name+"</a>",a<e.length-1&&(r+=t||", ")})),r}}}},h=(s(441),Object(c.a)(u,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return e.gallery.details.open&&e.book?s("div",{directives:[{name:"shortkey",rawName:"v-shortkey.once",value:["esc"],expression:"['esc']",modifiers:{once:!0}}],attrs:{id:"ale-bookdetails"},on:{shortkey:function(t){return e.closeBookDetails()}}},[s("div",{staticClass:"arrow"}),e._v(" "),s("div",{directives:[{name:"shortkey",rawName:"v-shortkey.once",value:{left:["arrowleft"],right:["arrowright"]},expression:"{left: ['arrowleft'], right: ['arrowright']}",modifiers:{once:!0}}],attrs:{id:"book-info-container"},on:{shortkey:e.openAdjacentBookDetails}},[s("div",{staticClass:"inner-wrap"},[s("div",{staticClass:"top"},[s("div",{staticClass:"information"},[s("div",{staticClass:"cover-wrap"},[s("a",{attrs:{href:e.bookUrl,target:"_blank"}},[s("div",{staticClass:"progressbar"},[s("div",{staticClass:"progress",style:e.progressbarWidth(e.book)})]),e._v(" "),s("img",{staticClass:"cover",attrs:{src:e.makeCoverUrl(e.book.coverUrl)}})])]),e._v(" "),s("div",{staticClass:"progress-info",domProps:{innerHTML:e._s(e.progressInfo(e.book))}}),e._v(" "),s("div",{staticClass:"basic-details"},[s("div",{staticClass:"search-goodreads"},[s("a",{attrs:{href:e.goodReadsSearchUrl,target:"_blank"}},[e._v("Search in Goodreads")])]),e._v(" "),e.linkifyObjArray(e.book.authors)?s("div",{staticClass:"authors"},[s("strong",{staticClass:"label"},[e._v("Author:")]),e._v(" "),s("span",{domProps:{innerHTML:e._s(e.linkifyObjArray(e.book.authors))}})]):e._e(),e._v(" "),e.linkifyObjArray(e.book.narrators)?s("div",{staticClass:"narrators"},[s("strong",{staticClass:"label"},[e._v("Narrator:")]),e._v(" "),s("span",{domProps:{innerHTML:e._s(e.linkifyObjArray(e.book.narrators))}})]):e._e(),e._v(" "),e.linkifyObjArray(e.book.series)?s("div",{staticClass:"series"},[s("strong",{staticClass:"label"},[e._v("Series:")]),e._v(" "),s("span",{domProps:{innerHTML:e._s(e.linkifySeries(e.book.series))}})]):e._e(),e._v(" "),e.book.myRating?s("div",{staticClass:"own-rating"},[s("strong",{staticClass:"label"},[e._v("My rating:")]),e._v(" "),s("span",[e._v(e._s(e.book.myRating))])]):e._e(),e._v(" "),e.linkifyObjArray(e.book.publisher)?s("div",{staticClass:"publisher"},[s("strong",{staticClass:"label"},[e._v("Publisher:")]),e._v(" "),s("span",{domProps:{innerHTML:e._s(e.linkifyObjArray(e.book.publisher))}})]):e._e(),e._v(" "),e.book.rating?s("div",{staticClass:"rating"},[s("strong",{staticClass:"label"},[e._v("Overall rating:")]),e._v(" "),s("span",[e._v(e._s(e.book.rating)+" ("+e._s(e.book.ratings)+" ratings)")])]):e._e()]),e._v(" "),e.booksInSeries?s("div",{staticClass:"label hidden-section-label my-books-in-series-label",on:{click:e.booksInSeriesLabelClick}},[e._v("Books I own in the series "),s("span",[e._v(e._s(e.booksInSeriesCount))]),s("font-awesome-icon",{attrs:{fas:"",icon:e.booksInSeriesContent.toggle?"chevron-up":"chevron-down"}})],1):e._e(),e._v(" "),e.booksInSeriesContent.toggle?s("div",{staticClass:"hidden-section my-books-in-series"},e._l(e.booksInSeries,(function(t,r,i){return s("div",{key:r},[s("strong",[e._v(e._s(r))]),e._v(" "),e._l(t,(function(t,i){return s("div",{key:i,staticClass:"numbers-list-item",class:e.numbersClass(t),attrs:{"data-series-name":r},on:{click:function(s){return e.booksInSeriesItemClick(t,r)}}},[s("span",{directives:[{name:"tippy",rawName:"v-tippy",value:{placement:"left",arrow:!0},expression:"{ placement: 'left',  arrow: true }"}],staticClass:"icon",attrs:{content:e.iconTippyContent(t)}},[s("font-awesome-icon",{attrs:{fas:"",icon:e.booksInSeriesIcon(t)}})],1),e._v(" "),s("span",{staticClass:"numbers"},[e._v(e._s(e.bookNumbers(t,r)))]),e._v(" "),s("span",{staticClass:"title"},[e._v(e._s(t.title))])])}))],2)})),0):e._e()]),e._v(" "),s("div",{staticClass:"book-summary-wrapper",class:{expanded:e.gallery.details.readmore.toggle},style:{maxHeight:e.summary.maxHeight,paddingBottom:e.gallery.details.readmore.toggle?"40px":"0px"}},[s("div",{staticClass:"book-summary"},[s("h2",{staticClass:"book-title"},[s("a",{attrs:{href:e.bookUrl,target:"_blank"}},[e._v("\n                "+e._s(e.book.title)+"\n              ")])]),e._v(" "),e.linkifyObjArray(e.book.categories)?s("div",{staticClass:"categories"},[s("span",{domProps:{innerHTML:e._s(e.linkifyObjArray(e.book.categories," > "))}})]):e._e(),e._v(" "),s("div",{staticClass:"inline-children smoll-text"},[e.book.releaseDate?s("div",{staticClass:"release-date"},[s("span",{staticClass:"label"},[e._v("Released:")]),e._v(" "),s("span",[e._v(e._s(e.book.releaseDate))])]):e._e()]),e._v(" "),s("div",{staticClass:"summary-inner-wrap",domProps:{innerHTML:e._s(e.getSummary)}})]),e._v(" "),e.summary.readmore.exists?s("div",{staticClass:"summary-read-more",on:{click:e.summaryReadMoreclick}},[s("span",[e._v(e._s(e.gallery.details.readmore.toggle?"Read less":"Read more"))]),e._v(" "),s("font-awesome-icon",{attrs:{fas:"",icon:e.gallery.details.readmore.toggle?"chevron-up":"chevron-down"}})],1):e._e()])])])])]):e._e()}),[],!1,null,null,null).exports),d={name:"aleBookdetails",props:["booksArray","library","gallery"],data:function(){return{searchShouldSort:!1,searchFocusListener:null,searchOptionsHider:null,resultTimer:null,enableZoomTimer:null}},created:function(){var e=this,t=this;Eventbus.$on("detailsToggle",this.onDetailsToggle),this.$on("fuseResultsUpdated",(function(e){t.gallery.searchActive=e.length>0,t.gallery.searchValue.trim()||t.gallery.searchActive?t.gallery.searchValue.trim()&&(t.gallery.searchActive&&t.gallery.searchValueChanged&&null===t.gallery.searchOptions.lists.tempSortIndex&&(t.gallery.searchOptions.lists.tempSortIndex=t.gallery.searchOptions.lists.sortIndex,t.gallery.searchOptions.lists.sortIndex=-1),clearTimeout(t.resultTimer),t.resultTimer=setTimeout((function(){t.gallery.fuseResults=e}),500)):(t.gallery.searchOptions.lists.sortIndex=t.gallery.searchOptions.lists.tempSortIndex,t.gallery.searchOptions.lists.tempSortIndex=null)})),this.$on("fuseInputChanged",(function(t){e.gallery.searchValueChanged=e.gallery.searchValue!==t,e.gallery.searchValueChanged&&(e.gallery.searchOptions.open=!1,e.gallery.details.index=-1,""===t.trim()&&(e.gallery.fuseResults=null)),e.gallery.searchValue=t}))},mounted:function(){this.searchInputFocus(this),this.searchKeyupListener=$("#ale-search").on("keyup",'> input[type="search"]',this.searchInputKeyup),$("#ale-search").on("touchstart",this.iosAutozoomDisable)},beforeDestroy:function(){$("#ale-search").off("keyup",'> input[type="search"]',this.searchInputFocus),$("#ale-search").off("touchstart",this.iosAutozoomDisable),Eventbus.$off("detailsToggle",this.onDetailsToggle),this.searchFocusListener=null,this.searchKeyupListener=null,this.searchOptionsHider=null},methods:{iosAutozoomDisable:function(){navigator.userAgent.length&&/iPhone|iPad|iPod/i.test(navigator.userAgent)&&($("head").find("meta[name=viewport]").remove(),$('<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=0" />').appendTo("head"),clearTimeout(this.enableZoomTimer),this.enableZoomTimer=setTimeout((function(){$("head").find("meta[name=viewport]").remove(),$('<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=1" />').appendTo("head")}),700))},searchInputFocus:function(e){},searchInputKeyup:function(e){13==e.which&&(document.activeElement.blur(),$('#ale-search > input[type="search"]').blur())},focusSearch:function(e){var t=e.target;$(t).is("#ale-search")&&$('#ale-search > input[type="search"]').focus()},releaseSearchLock:function(){var e=this.gallery;e.customResults=null,e.searchEnabled=!0,e.searchLocked.active=null,e.searchLocked.reason=null,e.searchLocked.inputValue=null,e.searchOptions.lists=this.gallery.searchOptions.listsTemp,e.searchOptions.listsTemp=null,e.searchValue=this.gallery.searchLocked.tempValue,e.searchLocked.tempValue=null,e.searchIcons.scope=!0,e.searchIcons.filter=!0,e.searchIcons.sort=!0,e.details.open=!1,e.details.index=-1},onDetailsToggle:function(e){this.gallery.searchOptions.open=!1},forceRerender:function(){var e=this;this.gallery.searchEnabled=!1,this.$nextTick((function(){e.gallery.searchEnabled=!0}))},optionsCheck:function(e,t){this.gallery.details.open=!1,this.gallery.details.index=-1,"sort"===e&&(this.gallery.searchOptions.lists.sortIndex=t)},sortExtrasCheck:function(e){"randomize"===e&&(this.gallery.details.open=!1,this.gallery.details.index=-1)},openSearchOptions:function(e,t){var s=this,r=this;this.gallery.searchOptions.open?this.gallery.searchOptions.open&&this.gallery.searchOptions.lists.current==e&&(this.gallery.searchOptions.open=!1):this.gallery.searchOptions.open=!0,this.gallery.searchOptions.open&&null===r.searchOptionsHider&&(r.searchOptionsHider=$(document).on("mouseup",(function(e){var t=$(e.target).closest("#search-options"),s=$(e.target).closest(".search-opt-btn");t.length<1&&s.length<1&&(r.gallery.searchOptions.open=!1)})));var i=this.gallery.searchOptions.lists.current;if(this.gallery.searchOptions.lists.current=e,this.gallery.searchOptions.open||i!==e){var a=$(t.currentTarget);this.$nextTick((function(){s.repositionSearchOptions(a)}))}},repositionSearchOptions:function(e){var t={};t.el=$("#search-options"),t.width=t.el.innerWidth();var s={};s.el=$("#ale-search > .icons"),s.width=s.el.innerWidth();var r={};r.el=e.parent(),r.width=r.el.innerWidth(),r.middle=r.el.position().left+r.width/2+parseInt(r.el.css("margin-left"),10),r.middle=s.width-r.middle,t.position=r.middle-t.width/2;var i=r.el.offset().left+r.width/2+t.width/2-$(window).width(),a=i>0?i+20:0;t.el.css({right:t.position+a});var o={};o.el=t.el.find(".search-opts-arrow"),o.el.css({left:t.width/2-10+a})}},computed:{searchIsActive:function(){return this.gallery.searchActive},currentOptionsListName:function(){return this.gallery.searchOptions.lists.current},currentOptionsList:function(){var e=this.gallery.searchOptions.lists.current;return this.gallery.searchOptions.lists[e]},placeholder:function(){var e,t;return"Search: "+(e=this.aliciaKeys,t=[],$.each(e,(function(e,s){t.push(s.replace(".name",""))})),t.join(", "))},aliciaKeys:function(){var e=_.filter(this.gallery.searchOptions.lists.scope,["active",!0]);return _.map(e,(function(e){if(e.active)return e.key}))}}},p=(s(442),Object(c.a)(d,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"ale-search-wrap"}},[s("div",{attrs:{id:"ale-search"},on:{click:function(t){return e.focusSearch(t)}}},[e.gallery.searchEnabled?e._e():s("div",{staticClass:"search-locked"},[s("div",{directives:[{name:"tippy",rawName:"v-tippy",value:{placement:"right",arrow:!0},expression:"{ placement: 'right',  arrow: true }"}],staticClass:"icon",attrs:{content:"Click here to re-enable search"},on:{click:e.releaseSearchLock}},[s("font-awesome-icon",{attrs:{fas:"",icon:"lock"}}),e._v(" "),s("font-awesome-icon",{attrs:{fas:"",icon:"unlock-alt"}})],1),e._v(" "),e.gallery.searchLocked.reason?s("div",{staticClass:"locked-text-reason"},[e._v("\n        "+e._s(e.gallery.searchLocked.reason)+"\n      ")]):e._e(),e._v(" "),e.gallery.searchLocked.inputValue?s("div",{staticClass:"locked-text"},[e._v("\n        "+e._s(e.gallery.searchLocked.inputValue)+"\n      ")]):e._e()]),e._v(" "),e.gallery.searchEnabled?s("VueFuse",{attrs:{placeholder:e.placeholder,list:e.library.books,keys:e.aliciaKeys,location:0,distance:400,threshold:.25,defaultAll:!1,search:e.gallery.searchValue,shouldSort:e.searchShouldSort}}):e._e(),e._v(" "),s("div",{staticClass:"icons"},[s("div",{staticClass:"icon-wrap"},[s("div",{staticClass:"book-in-selection"},[s("div",{directives:[{name:"tippy",rawName:"v-tippy",value:{placement:"top",arrow:!0},expression:"{ placement: 'top',  arrow: true }"}],staticClass:"inner-wrap",attrs:{content:"Visible books"}},[e._v("\n            "+e._s(e.booksArray.length)+"\n          ")])])]),e._v(" "),s("div",{staticClass:"icon-wrap",class:{disabled:!e.gallery.searchIcons.scope}},[s("div",{directives:[{name:"tippy",rawName:"v-tippy",value:{placement:"top",arrow:!0,maxWidth:410},expression:"{ placement: 'top',  arrow: true, maxWidth: 410 }"}],staticClass:"scope search-opt-btn",class:{active:e.gallery.searchOptions.open&&"scope"===e.currentOptionsListName},attrs:{content:"Change the search scope for more accurate results"},on:{click:function(t){return e.openSearchOptions("scope",t)}}},[s("font-awesome-icon",{attrs:{fas:"",icon:"microscope"}})],1)]),e._v(" "),s("div",{staticClass:"icon-wrap",class:{disabled:!e.gallery.searchIcons.filter}},[s("div",{directives:[{name:"tippy",rawName:"v-tippy",value:{placement:"top",arrow:!0},expression:"{ placement: 'top',  arrow: true }"}],staticClass:"filter search-opt-btn",class:{active:e.gallery.searchOptions.open&&"filter"===e.currentOptionsListName},attrs:{content:"Filter books"},on:{click:function(t){return e.openSearchOptions("filter",t)}}},[s("font-awesome-icon",{attrs:{fas:"",icon:"filter"}})],1)]),e._v(" "),s("div",{staticClass:"icon-wrap",class:{disabled:!e.gallery.searchIcons.sort}},[s("div",{directives:[{name:"tippy",rawName:"v-tippy",value:{placement:"top",arrow:!0},expression:"{ placement: 'top',  arrow: true }"}],staticClass:"sort search-opt-btn",class:{active:e.gallery.searchOptions.open&&"sort"===e.currentOptionsListName,"is-enabled":e.gallery.searchOptions.lists.iewsIndex>-1},attrs:{content:"Sort books"},on:{click:function(t){return e.openSearchOptions("sort",t)}}},[s("font-awesome-icon",{attrs:{fas:"",icon:"sort"}})],1)]),e._v(" "),e.gallery.searchOptions.open?s("div",{attrs:{id:"search-options"}},[s("div",{staticClass:"search-opts-arrow"}),e._v(" "),"sort"===e.currentOptionsList[0].type?s("ul",{staticClass:"sort-extras"},e._l(e.gallery.searchOptions.lists.sortExtras,(function(t,r){return s("li",{key:t.key,staticClass:"search-option"},[s("label",{directives:[{name:"tippy",rawName:"v-tippy",value:{placement:"left",arrow:!0},expression:"{ placement: 'left',  arrow: true }"}],attrs:{content:!!t.tippy&&t.tippy}},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.active,expression:"item.active"}],attrs:{type:"checkbox"},domProps:{value:r,checked:Array.isArray(t.active)?e._i(t.active,r)>-1:t.active},on:{change:[function(s){var i=t.active,a=s.target,o=!!a.checked;if(Array.isArray(i)){var n=r,l=e._i(i,n);a.checked?l<0&&e.$set(t,"active",i.concat([n])):l>-1&&e.$set(t,"active",i.slice(0,l).concat(i.slice(l+1)))}else e.$set(t,"active",o)},function(s){return e.sortExtrasCheck(t.key,r)}]}}),e._v(" "),s("span",{staticClass:"checkbox"},[s("font-awesome-icon",{attrs:{fas:"",icon:"square"}}),e._v(" "),s("font-awesome-icon",{attrs:{fas:"",icon:"check"}})],1),e._v(" "),s("span",{staticClass:"label"},[e._v(e._s(t.label||t.key.replace(".name","")))])])])})),0):e._e(),e._v(" "),s("ul",e._l(e.currentOptionsList,(function(t,r){return s("li",{key:t.key,staticClass:"search-option",class:{disabled:e.searchIsActive}},[s("label",{directives:[{name:"tippy",rawName:"v-tippy",value:{placement:"left",arrow:!0},expression:"{ placement: 'left',  arrow: true }"}],attrs:{content:!!t.tippy&&t.tippy}},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.active,expression:"item.active"}],attrs:{type:"checkbox"},domProps:{value:r,checked:Array.isArray(t.active)?e._i(t.active,r)>-1:t.active},on:{change:[function(s){var i=t.active,a=s.target,o=!!a.checked;if(Array.isArray(i)){var n=r,l=e._i(i,n);a.checked?l<0&&e.$set(t,"active",i.concat([n])):l>-1&&e.$set(t,"active",i.slice(0,l).concat(i.slice(l+1)))}else e.$set(t,"active",o)},function(s){return e.optionsCheck(t.type,r)}]}}),e._v(" "),"sort"===t.type?s("span",{staticClass:"sortbox",class:{active:r===e.gallery.searchOptions.lists.sortIndex}},[s("font-awesome-icon",{attrs:{fas:"",icon:"sort-down"}}),e._v(" "),s("font-awesome-icon",{attrs:{fas:"",icon:"sort-up"}})],1):e._e(),e._v(" "),t.type?e._e():s("span",{staticClass:"checkbox"},[s("font-awesome-icon",{attrs:{fas:"",icon:"square"}}),e._v(" "),s("font-awesome-icon",{attrs:{fas:"",icon:"check"}})],1),e._v(" "),s("span",{staticClass:"label"},[e._v(e._s(t.label||t.key.replace(".name","")))])])])})),0)]):e._e()])],1)])}),[],!1,null,null,null).exports),g={name:"sortValues",props:["book","gallery"],mixins:[i.a,a.a,o],data:function(){return{notAvailable:"N/A"}},methods:{sortedBy:function(e){return this.activeSortKey===e}},computed:{showSortValues:function(){return _.find(this.gallery.searchOptions.lists.sortExtras,(function(e){return"sortValues"===e.key&&e.active}))},activeSortKey:function(){var e=this.gallery.searchOptions.lists.sortIndex;return-1===e?"title":this.gallery.searchOptions.lists.sort[e].key},sortContents:function(){var e=this.activeSortKey.replace(".name",""),t="bookNumbers"===e?this.book.series:null;if(this.book[e]||t)switch(e){case"bookNumbers":if(this.book.series){var s=_.filter(this.book.series,"bookNumbers");s=_.map(s,"bookNumbers"),s=_.flatten(s),_.isEmpty(s)&&(s=null);var r=this.gallery.searchOptions.lists.numberSortSeriesName;if(r){var i=_.find(this.book.series,["name",r]).bookNumbers;return i?_.isArray(i)?i.join(", "):i:s?s.join(", "):""}return s?s.join(", "):""}return"";case"authors":case"narrators":case"publisher":return this.book[e][0].name;case"rating":var a=this.book.ratings?" <small>("+this.book.ratings.match(/\d/g).join("").toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")+")</small>":"";return this.book[e]+a;case"ratings":var o=this.book[e],n=this.book.rating?" <small>("+this.book.rating+")</small>":"";return o.match(/\d/g).join("").toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")+n;case"progress":var l=this.progressbarWidth(this.book);return this.progress(this.book)+'<div class="progress-bar"><div style="width: '+l.width+';"></div></div>';default:return this.book[e]}else switch(e){case"bookNumbers":return!1;case"progress":return'<div>No progress</div> <div class="progress-bar"></div>';default:return this.notAvailable}}},methods:{progress:function(e){if(e.progress&&e.length){if("finished"===e.progress.toLowerCase().trim()){var t=this.timeStringToSeconds(e.length);return"<div>Finished ( "+this.secondsToTimeString(t,!0)+" )</div>"}var s=this.timeStringToSeconds(e.progress),r=this.timeStringToSeconds(e.length),i=r-s;return this.secondsToTimeString(i,!0)+" / "+this.secondsToTimeString(r,!0)}return"<div>Length: "+e.length+"</div>"}}},m=(s(443),{name:"aleBooks",props:["booksArray","library","gallery","general"],components:{sortValues:Object(c.a)(g,(function(){var e=this.$createElement,t=this._self._c||e;return this.showSortValues?t("div",{staticClass:"sort-values-container"},[this.sortContents?t("div",{class:"sort-"+this.activeSortKey,domProps:{innerHTML:this._s(this.sortContents)}}):this._e()]):this._e()}),[],!1,null,null,null).exports},mixins:[s(262).a,n.a],data:function(){return{windowWidth:null,windowResizeTimer:null,filteredBooks:null}},created:function(){var e=this;if("ale-category"===this.$route.name){var t=this.$route.params.parent,s=this.$route.params.child;t&&(e.gallery.customResults=_.filter(e.library.books,(function(r){if(r.categories){if(s){if(e.slugify(r.categories[0].name)===t&&e.slugify(r.categories[1].name)===s)return!0}else if(e.slugify(r.categories[0].name)===t)return!0}})))}Eventbus.$on("galleryBookClick",this.onBookClicked),this.windowWidth=$(window).width(),$(window).on("resize",this.onWindowResize),$("body, html").on("scroll mousedown wheel DOMMouseScroll mousewheel keyup touchmove",this.scrollStopAnimate)},beforeDestroy:function(){Eventbus.$off("galleryBookClick",this.onBookClicked),$(window).off("resize",this.onWindowResize),$("body, html").off("scroll mousedown wheel DOMMouseScroll mousewheel keyup touchmove",this.scrollStopAnimate)},mounted:function(){this.$route.query.book&&this.$nextTick((function(){var e=$('#ale-books .ale-book[data-asin="'+this.$route.query.book+'"]');e.length>0&&(console.log(e[0]),Eventbus.$emit("galleryBookClick",{from:"ale-gallery-query",index:e.index(),dontClose:!0}))}))},methods:{imageAlt:function(e,t){return e.authors[0].name+" - "+e.title},playSample:function(e,t){Eventbus.$emit("playSample",{from:"aleBooks",route:this.$route,book:e,index:t})},stringifyArray:function(e,t){return t?_.map(e,t).join(", "):e.join(", ")},scrollStopAnimate:function(){$("body, html").stop()},onBookClicked:function(e){this.detailsToggle(e.index,e.animationSpeed,e.dontClose)},detailsToggle:function(e,t,s){var r=this,i=this;this.gallery.details.readmore.toggle=!1;var a=$($("#ale-gallery > div > .ale-book").get(e)),o=a.offset().top-$(document).scrollTop();this.gallery.details.open;this.gallery.details.open?!s&&this.gallery.details.open&&this.gallery.details.index===e&&(this.gallery.details.open=!1):this.gallery.details.open=!0;var n=this.gallery.details.index;this.gallery.details.index=e,this.gallery.details.changed=n!==e||this.gallery.details.open,this.$nextTick((function(){if(r.gallery.details.open){var s=$($("#ale-gallery > div > .ale-book").get(e));r.calculateDetailsPosition(s,r,e,n,o,t,(function(e){var t=e.data("asin");console.log("s"),console.log(i.$route.query.book),console.log("e"),i.$route.query.book!==t&&i.$router.replace({query:{book:t}})}))}else{a.data("asin");i.$route.query.book&&i.$router.replace({query:{book:void 0}})}Eventbus.$emit("detailsToggle",{from:"aleBooks",detailsChanged:r.gallery.details.changed})}))},calculateDetailsPosition:function(e,t,s,r,i,a,o){var n=$("#ale-gallery"),l=n.width(),c=n.find(".ale-book").first(),u=c.width(),h=n.find(".ale-book").length,d=Math.floor(l/u),p=s,g=c.find(".ale-cover"),m=parseInt(g.css("margin-left"))+parseInt(g.css("margin-right"));n.find(".inner-wrap").css({maxWidth:u*d-m});var y=Math.floor(h/d);h%d>0&&++y;var f=y*d-h,v=Math.floor(p/d)+1,b=d*v;b=v===y?b-f:b;var k=n.find(".ale-book").get(b-1),_=$("#ale-bookdetails").insertAfter(k),w=e.offset().left+u/2+8,S=_.find("> .arrow");parseInt(S.css("border-left-width"));S.css({left:w});var C=e.offset().top,x=$("body, html");x.scrollTop(C-i);var T=Math.abs(i),O=null!=a?a:700;0!=a&&(T<30?O=0:T<40?O/=6:T<60?O/=4:T<50?O/=5:T<130&&(O/=2),O<0&&(O=0)),x.stop().animate({scrollTop:C-2*parseInt(g.css("margin-top"))},O,(function(){o&&o(e)}))},onWindowResize:function(){var e=this;clearTimeout(e.windowResizeTimer),e.windowResizeTimer=setTimeout((function(){var t=$(this).width();if(t!==e.windowWidth&&(e.windowWidth=t,e.gallery.details.open)){var s=e.gallery.details.index,r=$($("#ale-gallery > div > .ale-book").get(s)),i=r.offset().top-$("body, html").scrollTop();e.calculateDetailsPosition(r,e,s,s,i,0),Eventbus.$emit("afterWindowResize",{from:"aleBooks"})}}),150)}}}),y=(s(444),Object(c.a)(m,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return e.booksArray.length>0?s("div",{attrs:{id:"ale-books"}},e._l(e.booksArray,(function(t,r){return s("lazy-component",{key:t.asin,staticClass:"ale-book",class:{"details-open":e.gallery.details.open&&e.gallery.details.index===r},attrs:{"data-asin":t.asin}},[s("div",{staticClass:"details-inner-wrap",attrs:{"data-title":t.title,"data-authors":e.stringifyArray(t.authors,"name"),"data-narrators":e.stringifyArray(t.narrators,"name")}},[s("sort-values",{attrs:{gallery:e.gallery,book:t}}),e._v(" "),s("div",{staticClass:"hidden"},[s("span",{staticClass:"title"},[e._v(e._s(t.title))]),e._v(" "),s("span",{staticClass:"authors"},[e._v(e._s(e.stringifyArray(t.authors,"name")))])]),e._v(" "),s("div",{staticClass:"ale-cover"},[s("div",{staticClass:"ale-play-sample",on:{click:function(s){return e.playSample(t,r)}}},[s("div",[s("font-awesome-icon",{attrs:{fas:"",icon:"play"}})],1)]),e._v(" "),s("div",{staticClass:"ale-click-wrap",on:{click:function(t){return e.detailsToggle(r)}}},[s("div",{staticClass:"ale-info-indicator"},[s("div",[s("font-awesome-icon",{attrs:{fas:"",icon:"book"}})],1)]),e._v(" "),s("img",{staticClass:"ale-cover-image",attrs:{src:e.makeCoverUrl(t.coverUrl),alt:e.imageAlt(t,r)}})])])],1)])})),1):e._e()}),[],!1,null,null,null).exports),f=s(148),v={methods:{sortTitle:function(e){return _.orderBy(e.books,(function(t){var s=t[e.sortKey];if(s){if("title"===e.sortKey){var r=t.title.toLowerCase(),i=r.match(/^the /),a=r.match(/^a /),o=r.match(/^an /),n=(i?/^the /:a&&/^a /)||o&&/^an /;return n&&(r=r.replace(n,"")),r}return s}return null}),e.direction)}}},b={mixins:[i.a],methods:{sortLength:function(e){var t=this;return _.orderBy(e.books,(function(e){return e.length?t.timeStringToSeconds(e.length):0}),e.direction)}}},k={methods:{sortRatings:function(e){return _.orderBy(e.books,(function(t){if(t[e.sortKey]){var s=t[e.sortKey];return"ratings"===e.sortKey&&(s=s.match(/\d/g).join("")),Number(s)}return 0}),e.direction)}}},w={mixins:[i.a],methods:{sortProgress:function(e){var t=this;return _.orderBy(e.books,(function(e){if(e.progress){if("finished"===e.progress.toLowerCase().trim())return 100;if(e.length){var s=t.timeStringToSeconds(e.progress),r=t.timeStringToSeconds(e.length);return(s=r-s)/r*100}return 0}return 0}),e.direction)}}},S={methods:{sortDateAdded:function(e){return _.orderBy(e.books,(function(e){return e.added}),e.direction)}}},C={methods:{sortReleaseDate:function(e){return _.orderBy(e.books,(function(e){return e.releaseDate?new Date(e.releaseDate.split("-")):new Date("1800","01","01")}),e.direction)}}},x={methods:{sortStringNameProp:function(e){var t=e.sortKey.replace(".name","");return _.orderBy(e.books,(function(e){return e[t]?e[t][0].name:null}),e.direction)}}},T=s(285),O={name:"aleGallery",components:{aleSearch:p,aleBooks:y,aleBookdetails:h,aleBreadcrumbs:f.a},mixins:[r,S,C,x,v,b,k,w,T.a],props:["library","general"],data:function(){return{gallery:{customResults:null,fuseResults:null,searchEnabled:!0,searchIcons:{scope:!0,filter:!0,sort:!0},searchLocked:{active:null,tempValue:null,reason:null,inputValue:null},searchActive:!1,searchValue:"",searchValueChanged:!1,searchOptions:{open:!1,listsTemp:null,lists:{current:null,scope:[{active:!0,key:"title"},{active:!0,key:"authors.name"},{active:!0,key:"narrators.name"},{active:!0,key:"series.name"},{active:!1,key:"categories.name"},{active:!1,key:"publisher"}],filter:[{active:!0,label:"Not started",key:"notStarted",condition:function(e){return!e.progress}},{active:!0,label:"Started",key:"started",condition:function(e){return!(!e.progress||e.progress.toLowerCase().match("finished"))}},{active:!0,label:"Finished",key:"finished",condition:function(e){return!(!e.progress||!e.progress.toLowerCase().match("finished"))}}],tempSortIndex:null,sortIndex:0,numberSortSeriesName:null,sortExtras:[{active:!1,key:"sortValues",label:"Show sort values",type:"sortExtras",tippy:"Value comes from the active sort category below. <br/> Book title is used as a fallback when you perform a search."},{active:!1,key:"randomize",label:"Randomize",type:"sortExtras",tippy:"Ignores sorting and randomizes the result instead. Applies to search results as well."}],sort:[{active:!0,key:"added",label:"Added",type:"sort",tippy:"High number = new <br/> Low number = old"},{active:!1,key:"title",label:"Title",type:"sort"},{active:!1,key:"releaseDate",label:"Release date",type:"sort"},{active:!1,key:"length",label:"Length",type:"sort"},{active:!1,key:"authors.name",label:"Author",type:"sort"},{active:!1,key:"narrators.name",label:"Narrator",type:"sort"},{active:!1,key:"bookNumbers",label:"Book number",type:"sort"},{active:!1,key:"rating",label:"Rating",type:"sort"},{active:!1,key:"ratings",label:"Number of ratings",type:"sort"},{active:!1,key:"progress",label:"Progress",type:"sort"},{active:!1,key:"publisher.name",label:"Publisher",type:"sort"}]}},details:{readmore:{toggle:!1},open:!1,index:-1,changed:!1,sliders:{}}}}},computed:{booksArray:function(){return this.sortedObj()}},methods:{sortedObj:function(){var e=this.filteredObj();if(_.find(this.gallery.searchOptions.lists.sortExtras,(function(e){return"randomize"===e.key&&e.active})))return _.shuffle(e);var t=this.gallery.searchOptions.lists.sortIndex;if(-1!==t){var s=this.gallery.searchOptions.lists.sort[t],r=s.key,i={books:e,direction:s.active?"desc":"asc",sortKey:r};switch(r.split(".")[0]){case"bookNumbers":i.seriesName=this.gallery.searchOptions.lists.numberSortSeriesName,e=this.sortBookNumbers(i);break;case"added":e=this.sortDateAdded(i);break;case"releaseDate":e=this.sortReleaseDate(i);break;case"authors":case"narrators":case"publisher":e=this.sortStringNameProp(i);break;case"title":e=this.sortTitle(i);break;case"length":e=this.sortLength(i);break;case"rating":case"ratings":e=this.sortRatings(i);break;case"progress":e=this.sortProgress(i)}}return e},filteredObj:function(){var e=this.gallery.customResults||this.gallery.fuseResults||this.library.books,t=this.filterRules();return _.filter(e,(function(e){var s=!1;return _.each(t,(function(t,r){if(t(e))return s=!0,!1})),s}))},filterRules:function(){var e=_.filter(this.gallery.searchOptions.lists.filter,["active",!0]);return _.map(e,(function(e){if(e.active)return e.condition}))}},created:function(){var e=this;if("ale-category"===this.$route.name)this.general.categories=this.buildCategories();else if("ale-series"===this.$route.name){_.find(this.gallery.searchOptions.lists.sortExtras,["key","sortValues"]).active=!0;_.find(this.gallery.searchOptions.lists.sort,["key","bookNumber"]);var t=_.findIndex(this.gallery.searchOptions.lists.sort,["key","bookNumbers"]);this.gallery.searchOptions.lists.sort[t].active=!1,this.gallery.searchOptions.lists.sortIndex=t,this.gallery.customResults=_.filter(this.library.books,(function(t){if(t.series&&e.$route.params.series)return _.find(t.series,(function(t){return console.log("B077XNSN35"===t.asin),t.asin===e.$route.params.series}))}))}}},A=(s(445),Object(c.a)(O,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"ale-gallery"}},[s("ale-search",{attrs:{booksArray:e.booksArray,library:e.library,gallery:e.gallery}}),e._v(" "),s("ale-bookdetails",{attrs:{booksArray:e.booksArray,library:e.library,gallery:e.gallery,general:e.general}}),e._v(" "),s("ale-books",{attrs:{booksArray:e.booksArray,library:e.library,gallery:e.gallery}})],1)}),[],!1,null,"09af61cb",null));t.default=A.exports}}]);